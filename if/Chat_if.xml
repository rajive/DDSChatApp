<?xml version="1.0"?>
<!-- 
Description
Data-Oriented Interface for Chat Service
-->
<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="/opt/rti/NDDSHOME/resource/schema/rti_dds_profiles.xsd"
	version="5.3.1">

	<!-- types -->
	<types>
		<include file="res/types/v2/Chat.xml" />
	</types>


	<!-- Domain Library -->
	<domain_library name="Chat_DomainLibrary">

		<domain name="Chat_domain">

			<register_type name="My::ChatObject" type_ref="My::ChatObject" />

			<topic name="Chat" register_type_ref="My::ChatObject" />

		</domain>
	</domain_library>

	<!-- Participant library -->
	<domain_participant_library
		name="ChatIfLib">

		<domain_participant name="Chat_Pub" domain_ref="Chat_DomainLibrary::Chat_domain">

			<publisher name="_pub">

				<data_writer name="Chat_writer" topic_ref="Chat">
					<datawriter_qos base_name="ChatQosLib::User.Service.Chat"/>
				</data_writer>

                <publisher_qos base_name="ChatQosLib::User.Service.Chat">
                    <partition>
                        <name>
                            <element></element>
                            <element>starwars</element>
                            <element>startrek</element>
                            <element>funny</element>
                            <element>*</element>
                        </name>
                    </partition>
                </publisher_qos>
			</publisher>
			
            <participant_qos base_name="ChatQosLib::User.Service.Chat"/>      
		</domain_participant>

		<domain_participant name="Chat_Sub" domain_ref="Chat_DomainLibrary::Chat_domain">

			<subscriber name="_sub">

				<data_reader name="Chat_reader" topic_ref="Chat">
					<filter name="Chat" kind="builtin.sql">
						<expression>
                          id = %0 OR id = %1 OR id = %2
                      </expression>
						<parameter_list>
							<param>'Rajive'</param>
							<param>'ANKITA'</param>
							<param>'NSS Int. Corp.'</param>
						</parameter_list>
					</filter>
                    <datareader_qos base_name="ChatQosLib::User.Service.Chat"/>					
				</data_reader>
				
                <subscriber_qos base_name="ChatQosLib::User.Service.Chat"/>				
			</subscriber>

            <participant_qos base_name="ChatQosLib::User.Service.Chat"/>
		</domain_participant>

	</domain_participant_library>
</dds>
